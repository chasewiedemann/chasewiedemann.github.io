---
title: "Blog"
output: html_document
---

# 8/11/2024: Making This Site

I am trying to get this site running. I'm hosting it on github pages through a Rproject. I like the simplicity of it so far, but the things I have read online have been suggesting a blogdown for larger projects. But I think I want to be the one whose doing all the background work, instead of relying on some blackbox to do it. Well, I am already relying on the blackbox of Rmarkdown, but I think I get that better.

Alright, the plan for the rest of the day is to get my municipal project onto here. What does that look like.

- You click on Projects
- Its under working projects
- you click on the title
- it takes you to the replication page (or the diary page not sure yet)
- You can get to the other pages (working paper, working slides, and replication) from that initial page

Lets go!

### Some starters

I think I want to document heavily, and to get that done, lets get a little formalism on how to do that. I imagine this isnt really where I should be doing stuff like this when working on a project, that should be on the diary page of that project, but this is like the diary of the website, so the rambling should go here. Lets say that all dated diary posts start with two hashtags and then any subsection start with 3. Lets see how this works in read time.

### Site rendering reminder
To render the site, save everything, rmarkdown::render_site(), commit and push.

### Lets try some code

```{r}
2+2
print(1+1)
```

### It worked!

Lets add some more stucutre before working on the projects. I want the files system that is running this website to mimic the website. So the only thing that is going to go in the main part of the file is the index.rmd that contains the text of the front page, and the _site.yaml file that controls the formatting. Everything else goes into a folder called NavBar

In NavBar about.rmd and blog.rmd can hang out by themseleves because tthey are just static pages. But summaries and projects need additional filing. So in NavBar, there blog.rmd, about.rmd, a Projects Folder, and a Summaries Folder. We are gonna focus on the Projects folder, but it should be similar to summaries.

Within the Projects folder, we have the projects.rmd. This need to list Links to all the actual projects. Right now I have three. each with its own folder. Again lets work with MuniProject, but the others should be similar. 

We want the 4 Files in here, working paper, working_slides, replication, and diary. Lets think about what the url should look like, which will hopefully get us a little closer to a good structure.

Let ~ denote chasewiedemann.github.io. So what do we want. We want to click on ~/Projects and see a list of Projects. We Then Want to click on ~/Projects/MuniProject/ and see a the 4 ingredients. Ok. Lets get ~/Projects Working. I lied. I want to do this for the MuniProject and the GridEstimators Project as an example to make sure it works for multiple. I should probably commit.  

### Bad (But in the End Good) Idea
I made a bunch of chagnes to the files structure, but didnt tell my _site.yml file about it. But fortunately, it seems like my output_dir docs file is really good at mimicing my file structure. I have everything fixed and will commit now. 

### Structure Note
When I say I am going to commit after immediately describing something. I will make the commit message the next highest header, underscore, and then the date. For example, I am going to commit now. the commit message will be strcuture note_081124

### Oh No
It didn't work. I guess I have to figure out what this output_dir is actually doing. Or do I need to make them html? Lets see if I can find a link

https://bookdown.org/yihui/rmarkdown/rmarkdown-site.html

This guy is saying (Right about 10.5.2) that all the .rmd or .md files in the ROOT of the directory will be rendered into HTML. Mine are in folders. 

Looking more into the site, it seems like the entire reason that people recommend blogdown is for this reason. It will only render the .rmd into html that are on the front page. 

I think what I need to do is output everything to a html_file. Im gonna try that with this the projects.rmd, about.rmd, projects.rmd page

What I need to do is write a script that goes through all of my rmds. renders them, and creates the html doc.

TEsting on the terminal now. Lets see if i can get blog.rmd to create NavBar/blog.html

That Worked. So What I need to Do is create my own script that will search through the NavBar director, and render all the .rmd files in it. lets go!!

## The Script

Ok heres the script. its title myRender.R and is found in the main files

```{r,eval = F}

library(tools)
all_files = list.files(paste0(getwd()),recursive = T)
toRender = all_files[file_ext(all_files) == "Rmd"]

for (files in toRender) {
  rmarkdown::render(files)  
}
rmarkdown::render_site()

```

All it does is go into the NavBar directory, find all the files that end in .rmd, and then render them. It then runs the render_site() command that seems to be doing a lot of the backend work that I dont fully understand yet. One potential downside I see is that this will render literally everything. That could be an issue if I have a large project somewhere. I think I can probably just go and check to see if its different from the github page, and then not render it if it hasnt changed, but thats an issue for another day. Lets commit by running myRender in the terminal

### Update

I got it working. Sometimes i get a weird index.lock file that I can only delete once I'm outside of R. Theres obviously more going on here than I comprehend, but I think I'm getting the hang of it. I just updated the home page, lets see if that works

### Update 2

I got everything running exactly as I have written it. The only issue is that the exact way I have written it removes all the links to other files. That means that once you are on the about page, theres no way to get back to index or projects. Lets fix that now. What i am trying first is just to add a navbar like in the _site.yml file into the about.rmd. Hopefully when this renders, it will add a navbar. Lets commit and check. I forgot to run myRender first, so lets find out if I messed everything up

### Update 3

Two things. First, I should be need to rethink my commit messages. Just Going up 1 doesnt make sense. So What Im going to do is to go up 2 and have both. So the day post will be a single hashtag, and then a topic will be a double. Then withing that topic i will be doing updates with a third hastag. So this one will be This Script_Update 3 081124

The other thing is that I don't know if my changes do anything. Im gonna need to remember to add something like "test TExt" to the bottom of a page Im testing

### Update 4

Its not updating anything. I can see on the github page that it went from pending to deployed. Im gonna check again before commiting the next changes. What I did is change the _site.yml to "doc/NavBar/~" instead of "NavBar/~". Again, I think this is more because I don't know what render_site() is actually doing, but this seems like an easy fix for now

Good thing I checked, the text loaded, but the about.html still doesn't have a navbar. Lets see if what I was previously planning on doing has a fix. I just have to be patient, and add a new Test Text 


### Update 5

I think I know what to do here. My last commit showed changes to the NavBar folder, but not to the docs folder. I need to port over my rendered stuff into the docs file. Heres the script

```{r,eval = F}


library(tools)
all_files = list.files(paste0(getwd()),recursive = T)
toRender = all_files[file_ext(all_files) == "Rmd"]
toRender = toRender[toRender != "index.Rmd"] ### Because Render Site will do this



for (files in toRender) {
    rmarkdown::render(files)
    file_name = gsub(file_ext(file),"",file)
    file.copy(from = paste0(file_name,"html"),paste0("docs/",file_name,"html"))
}


rmarkdown::render_site()
```

Not very elegant, but it should work.


### Update 6 

I scraped all that. The navBar idea is a non-starter at this point. I looked at the html code that was built, and hopefully at some point it isnt giberish to me, but for now its incomprehensible. Lets just build it statically. You should be able to get back home with a button click from every page. Thats gonna just need to be a template. I think thats what I will need to eventually do. Create a template directory that I can just add from. But lets start a new top and work on getting a link at the top of the page from the about page to the home page. This will create a pattern that we can replicate

## How to get Home

### Start 

Lets look at the internet for help. It seems pretty easy. Heres there example [RStudio](https://www.rstudio.com). Lets add something similar to the about.rmd, but its gonna take us Home. I have no clue what its gonna look like, and i just added the url of the home page to it

### Update

It worked, but now I want to do something a little more basic. Lets get rid of the pre-built navbar in favor of more control. I removed all the stuff from the _site.yml file. Lets get links to all the other stuff into the index.rmd file

### Update 2

We ran into some issues. Without the additional help from the black box, we never create a index.html page. I had previously skipped over it, but now we need it. I commited before writing this under How to get Home unlabled 1. Lets see if it works

### Update 3

It still is failing its build. Im gonna look at the index.html that it loads in a local web browser to make sure its not something dumn about me doing links wrong. A possible problem is that when I run rmarkdown::render_site(), it is deleting some of my stuff. Lets try going full manual

### Update 4

I think I found a (the?) issue. In the Setting page of Github, I had it building from a file called docs because thats how the tutorial that I read told me to do it. Now that I am straying from the source, I need to make sure I dont have any of those old relics in there. Lets see if that fixes it.

### Update 4 (updated)

It works. This is as basic as I can get this site, and I think that probably for the best (for now). I think Im going to get all the links into the pages, figure out the projects page, and then call it a day. Next commit will be all the Site links, then onto the projects page


